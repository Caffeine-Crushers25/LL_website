// üß¨ Genotype messages in Dutch
const genotypeMessages = {
  "CC": "<i>--Scroll down for English‚Äì-</i><br><strong><br>Beste 	<span style='color: hotpink;'> Pink Coffee Club</span> bezoeker,</strong><br><br>Bedankt voor je deelname aan ons onderzoek en je bezoek aan ons pop-up lab! We snappen dat je nieuwsgierig bent of jij je cafe√Øne afbreekt als een haas of als een schildpad. Het moment van de waarheid is eindelijk daar... <br><br>Je bent een <strong>langzame cafe√Øne-afbreker</strong> (genotype CC)! Dit betekent dat je lichaam cafe√Øne heel geleidelijk afbreekt, en kan het effect dus langer duren. Slechts <strong>9% van Nederland</strong> heeft hetzelfde profiel, een unieke groep dus.",
  "AC": " <i>--Scroll down for English --</i><br><strong><br>Beste<span style='color: hotpink;'> Pink Coffee Club</span> bezoeker,</strong><br><br> Bedankt voor je deelname aan ons onderzoek en je bezoek aan ons pop-up lab! We snappen dat je nieuwsgierig bent of jij je cafe√Øne afbreekt als een haas of als een schildpad. Het moment van de waarheid is eindelijk daar...<br><br> Je bent een <strong>langzame cafe√Øne-afbreker</strong> (genotype AC)! Dit betekent dat je lichaam cafe√Øne heel geleidelijk afbreekt, en kan het effect dus langer duren. Ongeveer <strong>39% van Nederland </strong> heeft hetzelfde genotype als jij.",
  "AA": "<i>--Scroll down for English‚Äì-</i><br><strong><br>Beste<span style='color: hotpink;'> Pink Coffee Club</span> bezoeker,</strong><br><br> Bedankt voor je deelname aan ons onderzoek en je bezoek aan ons pop-up lab! We snappen dat je nieuwsgierig bent of jij je cafe√Øne afbreekt als een haas of als een schildpad. Het moment van de waarheid is eindelijk daar...<br><br> Je bent een <strong>snelle cafe√Øne-afbreker</strong> (genotype AA)! Dit betekent dat je cafe√Øne snel en effici√´nt uit je systeem verdwijnt. Je zit daarmee in goed gezelschap: maar liefst <strong>52% van Nederland</strong> doet dit net als jij.",
  "Failed": "Helaas is het ons na meerdere pogingen niet gelukt om te bepalen of jij snel cafe√Øne afbreekt of niet. Dit ligt niet aan jou, waarschijnlijk is er bij ons in het lab iets misgegaan. Excuses daarvoor.",
  "Unclear": "Het is helaas de eerste keer niet gelukt om te bepalen of jij een echte Cafe√Øne Crusher bent. Wij gaan een tweede poging doen om je genotype te bepalen. Log op een later moment opnieuw in op deze website om te kijken of je resultaten nu wel beschikbaar zijn!",
  "test": "Vul het participant-ID in die je van ons hebt ontvangen om je eigen uitslag te bekijken!"
};

// ‚òï Coffee group messages in Dutch
const coffeeGroupMessages = {
  "A": "Overigens zat je in de <strong>testgroep</strong>. Dat betekent dat het kopje koffie daadwerkelijk cafe√Øne bevatte waar sommige anderen decaf hadden gekregen. Zie je dus andere deelnemers op jacht naar nog een kop koffie, geen zorgen, jij kreeg the real deal üòä. <br><br>Heb je nog vragen over je resultaten? Neem gerust contact met ons op! Mail daarvoor naar cafeinecrushers@gmail.com <br><br>Groetjes, Het <span style='color: hotpink;'>Pink Coffee Club</span> team",
  "B": "Overigens zat je in de <strong>controlegroep</strong>. Dat betekent dat het kopje waarvan je dacht dat het gewone koffie was, eigenlijk decaf was. Had je het gevoel dat het je minder oppepte dan normaal? Dan zat je instinct helemaal goed! üòä <br><br> Heb je nog vragen over je resultaten? Neem gerust contact met ons op! Mail daarvoor naar cafeinecrushers@gmail.com <br><br> Groetjes, <br> Het <span style='color: hotpink;'> Pink Coffee Club</span> team"
};

// üß¨ Genotype messages in English
const genotypeMessages_en = {
  "CC": "<strong><br>Dear <span style='color: hotpink;'>Pink Coffee Club</span> participant,</strong><br><br> Thank you for participating in our study and visiting our pop-up lab! We're sure you are curious to know whether you metabolize caffeine like a hare or a tortoise. The moment of truth has arrived...<br><br> You are a <strong>slow caffeine metabolizer</strong> (genotype CC), which means your body breaks down caffeine more gradually, so its effects may last longer. Only <strong>9% of the Dutch population</strong> shares this genotype, making you part of a unique minority.",
  "AC": "<strong><br>Dear <span style='color: hotpink;'>Pink Coffee Club</span> participant,</strong><br><br> Thank you for participating in our study and visiting our pop-up lab! We're sure you are curious to know whether you metabolize caffeine like a hare or a tortoise. The moment of truth has arrived...<br><br> You are a <strong>slow caffeine metabolizer </strong>(genotype AC), which means your body breaks down caffeine more gradually, so its effects may last longer. About <strong>39% of the Dutch population </strong>shares this genetic profile.",
  "AA": "<strong><br>Dear <span style='color: hotpink;'>Pink Coffee Club </span>participant,</strong><br><br> Thank you for participating in our study and visiting our pop-up lab! We're sure you are curious to know whether you metabolize caffeine like a hare or a tortoise. The moment of truth has arrived...<br><br> You are a <strong>fast caffeine metabolizer </strong> (genotype AA), meaning you clear caffeine from your system more efficiently. And you are in good company, as <strong>52% of the Dutch population</strong> shares this metabolic trait.",
  "Failed": "Unfortunately after many tries, we haven't been able to determine whether you are a fast caffeine metabolizer or not. This is not on you. Most likely something went wrong in our lab. We apologize for that.",
  "Unclear": "Unfortunately we were not able to determine if you are a real Caffeine Crusher on our first try. We will try again to determine your genotype. Try logging in on this website later to check if your results have been uploaded!",
  "test": "Fill in the participant-ID you have received from us to see your results!"
};

// ‚òï Coffee group messages in English
const coffeeGroupMessages_en = {
  "A": "And there's one more thing: you were in the <strong>test group</strong>, which means you received caffeinated coffee during the experiment, while some others received decaf. So if you have seen other participants looking for another cup of coffee after the experiments, don‚Äôt worry, you got the real thing üòä<br><br> If you have any questions about your results, please feel free to contact us by sending an email to cafeinecrushers@gmail.com. <br><br>Warm regards, <br>The <span style='color: hotpink;'> Pink Coffee Club</span> team",
  "B": "And there's one more thing: you were in the <strong>control group</strong>. So when you thought you were drinking regular coffee, you actually received decaf. If you felt like that cup just didn‚Äôt hit the way it normally does, well, your instincts were absolutely right! üòä<br><br> If you have any questions about your results, please feel free to contact us by sending an email to cafeinecrushers@gmail.com.<br><br>Warm regards,<br> The <span style='color: hotpink;'> Pink Coffee Club</span> team"
};

// üîç Main function
function getResult() {
  const id = document.getElementById("idInput").value.trim();
  const output = document.getElementById("output");

  fetch("results.json")
    .then((response) => {
      if (!response.ok) {
        throw new Error("Resultaten konden niet worden geladen.");
      }
      return response.json();
    })
    .then((data) => {
      const participantData = data[id];

      if (participantData) {
        const genotype = participantData.Genotype;
        const coffee = participantData.Coffee;

        const genotypeMessage = genotypeMessages[genotype] || "Genotype gevonden, maar geen bericht gekoppeld.";
        const coffeeMessage = coffeeGroupMessages[coffee] || "";

        const genotypeMessage_en = genotypeMessages_en[genotype] || "Genotype found, but no English translation available.";
        const coffeeMessage_en = coffeeGroupMessages_en[coffee] || "";

        output.innerHTML = `
          <div>
            <p>${genotypeMessage}<br><br>${coffeeMessage}</p>
            <hr>
            <p>${genotypeMessage_en}<br><br>${coffeeMessage_en}</p>
          </div>
        `;
      } else {
        output.innerHTML = "‚ùå Participant-ID niet gevonden. Check of je het juiste participant-ID hebt ingevuld. Het kan tot 24 uur duren voordat je resultaten beschikbaar zijn. Probeer het later opnieuw üòä.";
      }
    })
    .catch((error) => {
      output.innerHTML = "‚ö†Ô∏è Er ging iets mis bij het ophalen van de resultaten. Waarschijnlijk zijn we bezig nieuwe resultaten te uploaden. Probeer het later opnieuw! // Something went wrong while fetching the results. We are probably uploading new results. Try again later!";
      console.error(error);
    });
}
